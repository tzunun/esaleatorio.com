version: 0.2
phases:
  install:
    commands:
  #    - sudo apt-get install python3-dev -y 
  #    - sudo apt-get install python3-pip -y 
  #    - pip3 install awscli --upgrade --user 
      - sudo apt-get update 
      - sudo apt-get upgrade -y 
      - sudo apt install awscli -y 
      - awscli --version
      - wget github.com/gohugoio/hugo/releases/download/v0.55.4/hugo_0.55.4_Linux-64bit.deb
      - sudo apt-get install ./hugo* -y 
      - hugo version

  build:
    commands:
      - echo Entered the build phase ...
      - rm -rf public
      - hugo
  
  post_build:
    commands:
       - echo Build phase started...
       - aws s3 sync public/ s3://esaleatorio.com --delete
       - aws cloudfront create-invalidation --distribution-id E29K42285AKVEE --paths '/*'
       - echo Entered the post_build phase..
       - echo Build completed on `date`
  
